{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\cjsal\\\\Documents\\\\2. UAI\\\\Informatica\\\\Ingenieria de software\\\\Ingenieria-Software\\\\src\\\\components\\\\ChileMap.js\";\nimport { MapContainer, TileLayer, Marker, Popup, useMap } from \"react-leaflet\";\nimport \"leaflet/dist/leaflet.css\";\nimport L from \"leaflet\";\nimport { useEffect } from \"react\";\n\n// üîß Corrige el icono de Leaflet (por defecto no se muestra correctamente en React)\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png\",\n  iconUrl: \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png\",\n  shadowUrl: \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png\"\n});\nconst ChileMap = ({\n  sensors,\n  onSelectSensor\n}) => {\n  var _s = $RefreshSig$();\n  const chileBounds = L.latLngBounds(L.latLng(-56, -76), L.latLng(-17, -66));\n\n  // üß≠ centrar mapa cuando cambia el sensor seleccionado\n  const MapViewUpdater = ({\n    center\n  }) => {\n    _s();\n    const map = useMap();\n    useEffect(() => {\n      if (center) map.flyTo(center, 6, {\n        duration: 1\n      });\n    }, [center]);\n    return null;\n  };\n  _s(MapViewUpdater, \"IoceErwr5KVGS9kN4RQ1bOkYMAg=\", false, function () {\n    return [useMap];\n  });\n  const colorCircle = status => {\n    switch (status) {\n      case \"critical\":\n        return \"red\";\n      case \"warning\":\n        return \"orange\";\n      default:\n        return \"green\";\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"rounded-3xl border border-gray-200 shadow-xl overflow-hidden h-[600px] relative z-0\",\n    children: /*#__PURE__*/_jsxDEV(MapContainer, {\n      center: [-35.6751, -71.543],\n      zoom: 5,\n      minZoom: 4.5,\n      maxZoom: 10,\n      maxBounds: chileBounds,\n      maxBoundsViscosity: 1.0,\n      style: {\n        width: \"100%\",\n        height: \"100%\",\n        zIndex: 0\n      },\n      children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n        url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n        attribution: \"\\xA9 OpenStreetMap contributors\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this), sensors.map(s => /*#__PURE__*/_jsxDEV(Marker, {\n        position: [s.location.latitude, s.location.longitude],\n        eventHandlers: {\n          click: () => onSelectSensor(s)\n        },\n        children: [/*#__PURE__*/_jsxDEV(Popup, {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: s.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 15\n          }, this), \"Estado: \", s.status, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 15\n          }, this), \"Nivel: \", s.value, \"%\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: \"absolute\",\n            width: 20,\n            height: 20,\n            backgroundColor: colorCircle(s.status),\n            borderRadius: \"50%\",\n            transform: \"translate(-10px, -10px)\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 13\n        }, this)]\n      }, s.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(MapViewUpdater, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 5\n  }, this);\n};\n_c = ChileMap;\nexport default ChileMap;\nvar _c;\n$RefreshReg$(_c, \"ChileMap\");","map":{"version":3,"names":["MapContainer","TileLayer","Marker","Popup","useMap","L","useEffect","jsxDEV","_jsxDEV","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","ChileMap","sensors","onSelectSensor","_s","$RefreshSig$","chileBounds","latLngBounds","latLng","MapViewUpdater","center","map","flyTo","duration","colorCircle","status","className","children","zoom","minZoom","maxZoom","maxBounds","maxBoundsViscosity","style","width","height","zIndex","url","attribution","fileName","_jsxFileName","lineNumber","columnNumber","s","position","location","latitude","longitude","eventHandlers","click","name","value","backgroundColor","borderRadius","transform","id","_c","$RefreshReg$"],"sources":["C:/Users/cjsal/Documents/2. UAI/Informatica/Ingenieria de software/Ingenieria-Software/src/components/ChileMap.js"],"sourcesContent":["import { MapContainer, TileLayer, Marker, Popup, useMap } from \"react-leaflet\";\nimport \"leaflet/dist/leaflet.css\";\nimport L from \"leaflet\";\nimport { useEffect } from \"react\";\n\n// üîß Corrige el icono de Leaflet (por defecto no se muestra correctamente en React)\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl:\n    \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png\",\n  iconUrl:\n    \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png\",\n  shadowUrl:\n    \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png\",\n});\n\nconst ChileMap = ({ sensors, onSelectSensor }) => {\n  const chileBounds = L.latLngBounds(L.latLng(-56, -76), L.latLng(-17, -66));\n\n  // üß≠ centrar mapa cuando cambia el sensor seleccionado\n  const MapViewUpdater = ({ center }) => {\n    const map = useMap();\n    useEffect(() => {\n      if (center) map.flyTo(center, 6, { duration: 1 });\n    }, [center]);\n    return null;\n  };\n\n  const colorCircle = (status) => {\n    switch (status) {\n      case \"critical\":\n        return \"red\";\n      case \"warning\":\n        return \"orange\";\n      default:\n        return \"green\";\n    }\n  };\n\n  return (\n    <div className=\"rounded-3xl border border-gray-200 shadow-xl overflow-hidden h-[600px] relative z-0\">\n      <MapContainer\n        center={[-35.6751, -71.543]}\n        zoom={5}\n        minZoom={4.5}\n        maxZoom={10}\n        maxBounds={chileBounds}\n        maxBoundsViscosity={1.0}\n        style={{ width: \"100%\", height: \"100%\", zIndex: 0 }}\n      >\n        <TileLayer\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n          attribution='&copy; OpenStreetMap contributors'\n        />\n\n        {sensors.map((s) => (\n          <Marker\n            key={s.id}\n            position={[s.location.latitude, s.location.longitude]}\n            eventHandlers={{\n              click: () => onSelectSensor(s),\n            }}\n          >\n            <Popup>\n              <strong>{s.name}</strong>\n              <br />\n              Estado: {s.status}\n              <br />\n              Nivel: {s.value}%\n            </Popup>\n\n            {/* C√≠rculo de color m√°s visible debajo del √≠cono */}\n            <div\n              style={{\n                position: \"absolute\",\n                width: 20,\n                height: 20,\n                backgroundColor: colorCircle(s.status),\n                borderRadius: \"50%\",\n                transform: \"translate(-10px, -10px)\",\n              }}\n            />\n          </Marker>\n        ))}\n\n        <MapViewUpdater />\n      </MapContainer>\n    </div>\n  );\n};\n\nexport default ChileMap;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}